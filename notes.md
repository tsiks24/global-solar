{
        name: 'Mono 130 Watt Solar Panel ',
        slug: toSlug('Mono 130 Watt Solar Panel '),
        category: 'Solar Panels',
        images: [
          '/images/product1.webp',
        ],
        tags: ['featured', 'todays-deal'],
        isPublished: true,
        price: 120.00 ,
        listPrice: 150.00 ,
        avgRating: 4.2,
        numReviews: 10,
        ratingDistribution: [
          { rating: 1, count: 1 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 4 },
          { rating: 5, count: 5 },
        ],
        numSales: 25 ,
        countInStock: 100,
        description:
          'A high-efficiency monocrystalline solar panel designed for residential and commercial use. It features a durable design and excellent performance in low-light conditions, making it perfect for various installations. ',

       

        reviews: [],
      },

      {
        name: 'Solar Inverters for Panels  ',
        slug: toSlug('Solar Inverters for Panels  '),
        category: 'Inverters',
        images: [
          '/images/product2.webp',
        ],
        tags: ['new-arrival' , 'featured'],
        isPublished: true,
        price: 120.00 ,
        listPrice: 150.00 ,
        avgRating: 4.7,
        numReviews: 15,
        ratingDistribution: [
          { rating: 1, count: 1 },
          { rating: 2, count: 0 },
          { rating: 3, count: 3 },
          { rating: 4, count: 3 },
          { rating: 5, count: 8 },
        ],
        numSales: 45 ,
        countInStock: 150,
        description:
          'These inverters convert DC electricity generated by solar panels into AC electricity for home and business use. They are designed for maximum efficiency and include features like real-time monitoring and safety protections.  ',

       

        reviews: [],
      },

      {
        name: 'Grid Tie Power Inverter  ',
        slug: toSlug('Grid Tie Power Inverter  '),
        category: 'Inverters',
        images: [
          '/images/product3.webp',
        ],
          tags: ['today's-deal' , 'featured'],
        isPublished: true,
        price: 280 ,
        listPrice: 320 ,
        avgRating: 4.6,
        numReviews: 10,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 2 },
          { rating: 4, count: 3 },
          { rating: 5, count: 5 },
        ],
        numSales: 100 ,
        countInStock: 170,
        description:
          'Designed to connect your solar power system to the electrical grid, this inverter allows you to use solar energy while feeding excess power back to the grid. It features advanced technology for optimal energy conversion.  ',

        reviews: [],
      },

      {
        name: 'MC4 Solar Connector  ',
        slug: toSlug('MC4 Solar Connector '),
        category: 'Connectors ',
        images: [
          '/images/product4.webp',
        ],
             tags: ['most-bought' , 'featured'],
        isPublished: true,
        price: 10 ,
        listPrice: 15 ,
        avgRating: 4.8,
        numReviews: 15,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 5 },
          { rating: 5, count: 10},
        ],
        numSales: 50 ,
        countInStock: 200,
        description:
          'The MC4 connector is essential for connecting solar panels in series or parallel. It ensures a secure and waterproof connection, enhancing the overall reliability of your solar setup.   ',

       

        reviews: [],
      },

       {
        name: 'Solar Battery Controller  ',
        slug: toSlug('Solar Battery Controller  '),
        category: 'Controllers ',
        images: [
          '/images/product6.webp',
        ],
             tags: ['new-arrival' , 'featured'],
        isPublished: true,
        price: 75 ,
        listPrice: 90 ,
        avgRating: 4.4,
        numReviews: 18,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 5 },
          { rating: 3, count: 5 },
          { rating: 4, count: 5 },
          { rating: 5, count: 3},
        ],
        numSales: 0 ,
        countInStock: 40,
        description:
          'This solar battery controller manages the charging and discharging of batteries, ensuring optimal performance and longevity. It features overcharge protection and adjustable settings for various battery types  ',

       

        reviews: [],
      },

       {
        name: 'Solar Package System 1   ',
        slug: toSlug('Solar Package System 1  '),
        category: 'Solar Packages ',
        images: [
          '/images/product7.webp',
        ],
             tags: ['most-bought' , 'today's-deal'],
        isPublished: true,
        price: 1200 ,
        listPrice: 1500 ,
        avgRating: 4.4,
        numReviews: 18,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 5 },
          { rating: 3, count: 5 },
          { rating: 4, count: 5 },
          { rating: 5, count: 3},
        ],
        numSales: 40 ,
        countInStock: 60,
        description:
          'A complete solar package for home installation, including solar panels, inverters, and all necessary wiring and connectors. This system is designed for easy setup and maximum efficiency.  ',

       

        reviews: [],
      },

    {
        name: 'Solar Package System 2   ',
        slug: toSlug('Solar Package System 2  '),
        category: 'Solar Packages ',
        images: [
          '/images/product8.webp',
        ],
             tags: ['featured' , 'today's-deal'],
        isPublished: true,
        price: 1800 ,
        listPrice: 2200 ,
        avgRating: 4.8,
        numReviews: 10,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 2 },
          { rating: 5, count: 8},
        ],
        numSales: 12 ,
        countInStock: 30,
        description:
          'An advanced solar package designed for larger setups, providing higher energy output and efficiency. This system includes premium components for both residential and commercial applications. ',

       

        reviews: [],
      },

      {
        name: '60 Ah Solar Battery    ',
        slug: toSlug('60 Ah Solar Battery  '),
        category: 'Batteries ',
        images: [
          '/images/product12.webp',
        ],
             tags: ['today's-deal' , 'most-bought'],
        isPublished: true,
        price: 150 ,
        listPrice: 180 ,
        avgRating: 4.6,
        numReviews: 22,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 10 },
          { rating: 5, count: 12},
        ],
        numSales: 40 ,
        countInStock: 60,
        description:
          'This 60 Ah solar battery is designed for reliable energy storage in solar systems. It offers longevity and performance, making it ideal for both off-grid and grid-tied applications.  ',

       

        reviews: [],
      },

      {
        name: 'Solar MC4 Connector      ',
        slug: toSlug('Solar MC4 Connector  '),
        category: 'Connectors   ',
        images: [
          '/images/product9.webp',
          '/images/product11.webp',
        ],
             tags: ['new-arrival' , 'featured'],
        isPublished: true,
        price: 10 ,
        listPrice: 15 ,
        avgRating: 4.7,
        numReviews: 20,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 7 },
          { rating: 5, count: 8},
        ],
        numSales: 0 ,
        countInStock: 150,
        description:
          'Another reliable MC4 connector for solar installations. It provides a secure connection for solar panels, ensuring optimal performance and safety.   ',

       

        reviews: [],
      },

   
   {
        name: 'Solar Cable Voltaic System     ',
        slug: toSlug('Solar Cable Voltaic System   '),
        category: 'Cables  ',
        images: [
          '/images/product10.webp',
        ],
             tags: ['most-bought' , 'featured'],
        isPublished: true,
        price: 50 ,
        listPrice: 60 ,
        avgRating: 4.5,
        numReviews: 15,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 7 },
          { rating: 5, count: 8},
        ],
        numSales: 70 ,
        countInStock: 100,
        description:
          'Durable and weather-resistant solar cables designed for connecting solar panels to inverters and batteries. They ensure minimal power loss and long-lasting performance.   ',

       

        reviews: [],
      },

 {
        name: 'Solar Inverters Electric Power     ',
        slug: toSlug('Solar Inverters Electric Power  '),
        category: 'Inverters ',
        images: [
          '/images/product5.webp',
        ],
             tags: ['most-arrival' , 'featured'],
        isPublished: true,
        price: 300 ,
        listPrice: 350 ,
        avgRating: 4.8,
        numReviews: 14,
        ratingDistribution: [
          { rating: 1, count: 0 },
          { rating: 2, count: 0 },
          { rating: 3, count: 0 },
          { rating: 4, count: 2 },
          { rating: 5, count: 12},
        ],
        numSales: 0 ,
        countInStock: 50,
        description:
          'High-performance electric power inverters that convert solar energy into usable electricity. Ideal for residential and commercial systems, ensuring high efficiency and reliability.    ',

       

        reviews: [],
      },


      

      'use client'

import { redirect, useSearchParams } from 'next/navigation'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import Link from 'next/link'
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form'
import { useForm } from 'react-hook-form'
import { IUserSignIn } from '@/types'
import { signInWithCredentials } from '@/lib/actions/user.actions'
import { zodResolver } from '@hookform/resolvers/zod'
import { UserSignInSchema } from '@/lib/validator'
import { isRedirectError } from 'next/dist/client/components/redirect-error'
import { APP_NAME } from '@/lib/constants'
import { useState } from 'react'

const signInDefaultValues =
  process.env.NODE_ENV === 'development'
    ? {
        email: 'admin@example.com',
        password: '123456',
      }
    : {
        email: '',
        password: '',
      }

export default function CredentialsSignInForm() {
  const searchParams = useSearchParams()
  const callbackUrl = searchParams.get('callbackUrl') || '/'
  const [errorMessage, setErrorMessage] = useState<string | null>(null)
  const [isLoading, setIsLoading] = useState(false)

  const form = useForm<IUserSignIn>({
    resolver: zodResolver(UserSignInSchema),
    defaultValues: signInDefaultValues,
  })

  const { control, handleSubmit } = form

  const onSubmit = async (data: IUserSignIn) => {
    setIsLoading(true)
    setErrorMessage(null) // Clear previous errors
    try {
      await signInWithCredentials({
        email: data.email,
        password: data.password,
      })
      redirect(callbackUrl)
    } catch (error) {
      if (isRedirectError(error)) {
        throw error
      }
      setErrorMessage('Invalid email or password')
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <Form {...form}>
      <form onSubmit={handleSubmit(onSubmit)}>
        <input type='hidden' name='callbackUrl' value={callbackUrl} />
        <div className='space-y-6'>
          <FormField
            control={control}
            name='email'
            render={({ field }) => (
              <FormItem className='w-full'>
                <FormLabel>Email</FormLabel>
                <FormControl>
                  <Input placeholder='Enter email address' {...field} />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />

          <FormField
            control={control}
            name='password'
            render={({ field }) => (
              <FormItem className='w-full'>
                <FormLabel>Password</FormLabel>
                <FormControl>
                  <Input
                    type='password'
                    placeholder='Enter password'
                    {...field}
                  />
                </FormControl>
                <FormMessage />
              </FormItem>
            )}
          />

          {errorMessage && (
            <div className="text-red-500 text-sm">
              {errorMessage}
            </div>
          )}

          <div>
            <Button type='submit' disabled={isLoading}>
              {isLoading ? 'Signing In...' : 'Sign In'}
            </Button>
          </div>
          <div className='text-sm'>
            By signing in, you agree to {APP_NAME}&apos;s{' '}
            <Link href='/page/conditions-of-use'>Conditions of Use</Link> and{' '}
            <Link href='/page/privacy-policy'>Privacy Notice.</Link>
          </div>
        </div>
      </form>
    </Form>
  )
}